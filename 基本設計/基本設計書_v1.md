# 2. シスチE概要E
## 2.1 シスチE構Eの全体像

### 提供するシスチE
株式会社、EE展開する雑貨ブランド向けEオンライン販売サイト！ECサイト）、E 
啁Eの閲覧、検索、購入、注斁E琁Eオンラインで完結できる仕絁Eを構築する、E
### 主なユーザー区刁E利用形慁E
こEシスチEでは、大きく以下E2種類Eユーザーを想定してぁE、E
- **一般顧客EエンドユーザーEE*  
  啁Eの閲覧、購入、およEマイペEジ上での注斁E歴確認（任意会員登録によるEを行う、E 
  主にスマEトフォン、PC、タブレチEとぁEたデバイスからアクセスすることを想定する、E
- **管琁EEサイト運営老EE*  
  啁E惁Eの登録・編雁E、注斁E況E管琁Eどを行う、E 
  主にPCブラウザからアクセスし、ブラウザ上E管琁E面を通じて操作を実施する、E
### 利用チャネル
- インターネット経由で公開！ETTPS対応！E- モバイルファーストEレスポンシブデザイン

### インフラ構EE想定！E- クラウド環墁EEWS, GCP 等！E- Webアプリケーションサーバ、DBサーチE- SSL/TLS による暗号化通信

##　2.2シスチE概要図


<div class="mermaid">
graph TD
    subgraph ユーザー環墁E        Client[一般顧客<br>EスマE・PC・タブレチEE]
        Admin[管琁EEbr>EECブラウザE]
    end

    subgraph インターネッチE        Firewall[ファイアウォール]
        LoadBalancer[ロードバランサー]
        CDN[CDNE画像E信E]
    end

    subgraph クラウド環墁E        subgraph WebサーバE
            WebServer1[WebサーバE1]
            WebServer2[WebサーバE2]
        end

        subgraph アプリケーションサーバE
            AppServer1[AppサーバE1]
            AppServer2[AppサーバE2]
        end

        subgraph DBサーバE
            DB[DBサーバE<br>]
            end

        Storage[S3互換ストレージ]
        ExternalAPI[外部APIサービス]
    end

    %% ユーザーからインターネッチE    Client --> Firewall
    Admin --> Firewall

    %% インターネットE部の流れ
    Firewall --> LoadBalancer
    LoadBalancer --> WebServer1
    LoadBalancer --> WebServer2
    WebServer1 --> CDN
    WebServer2 --> CDN

    %% WebサーバEからアプリサーバE
    WebServer1 --> AppServer1
    WebServer2 --> AppServer2

    %% アプリサーバEからDBサーバE
    AppServer1 --> DB
    AppServer2 --> DB

    %% アプリサーバEから外部ストレージ・API
    AppServer1 --> Storage
    AppServer2 --> ExternalAPI

  
    
    style Client fill:#f9f,stroke:#333,stroke-width:1.5px
    style Admin fill:#f9f,stroke:#333,stroke-width:1.5px
    style Firewall fill:#ffcc99,stroke:#333,stroke-width:1.5px
    style LoadBalancer fill:#ffcc99,stroke:#333,stroke-width:1.5px
    style CDN fill:#ccffcc,stroke:#333,stroke-width:1.5px
    style WebServer1 fill:#99ccff,stroke:#333,stroke-width:1.5px
    style WebServer2 fill:#99ccff,stroke:#333,stroke-width:1.5px
    style AppServer1 fill:#6699cc,stroke:#333,stroke-width:1.5px
    style AppServer2 fill:#6699cc,stroke:#333,stroke-width:1.5px
    style DB fill:#99ff99,stroke:#333,stroke-width:1.5px
    style Storage fill:#cccccc,stroke:#333,stroke-width:1.5px
    style ExternalAPI fill:#ff9999,stroke:#333,stroke-width:1.5px
</div>


---

##  2.3吁EEの説昁E
### ユーザー環墁E- **一般顧客EスマE・PC・タブレチEEE*
  - Webブラウザを通じてサービスを利用するエンドユーザー、E- **管琁EEECブラウザEE*
  - 管琁E面にログインし、ユーザー管琁E啁E管琁E行う、E
---

### インターネッチE- **ファイアウォール**
  - 外部からの不正アクセスをE断する、E- **ロードバランサー**
  - 褁EのWebサーバEへの負荷刁Eを行い、可用性を確保、E- **CDNE画像E信EE*
  - 静的コンチEチE画像ECSS・JSEを高速E信するためのネットワーク、E
---

### クラウド環墁E#### WebサーバE
- **WebサーバE1, WebサーバE2**
  - ユーザーからのHTTP(S)リクエストを受け付け、HTML等を返却、E  - 負荷刁Eによりスケールアウト可能、E
#### アプリケーションサーバE
- **AppサーバE1, AppサーバE2**
  - ビジネスロジチEを実行し、データベEスとの橋渡しを行う、E
#### DBサーバE
- **DBサーバE**
 -チEEタを整合性を取って管琁Eる、E

#### そE他サービス
- **S3互換ストレージ**
  - 画像やファイルなどを保存する、E- **外部APIサービス**
  - 他サービスとの連携を行う、E
---

=======
## 3. 機E設訁E## 3.1 機E一覧EED付！E
| 機EID | 機E吁E                      | 対応画面ID         | 機E概要E                                          |
|---------|------------------------------|---------------------|----------------------------------------------------|
| F01     | トップEージ表示             | C01                 | サイトEトップEージを表示する                   |
| F02     | 啁E一覧表示                 | C02                 | 啁Eの一覧惁Eを表示する                         |
| F03     | 啁E詳細表示                 | C03                 | 選択した商品E詳細惁Eを表示する                 |
| F04     | カート操佁E                  | C04                 | カートE啁Eの確認E編雁E                        |
| F05     | 注斁E報入劁E                | C05                 | 配送EめE払い方法E入力画面                     |
| F06     | 注斁E誁E                    | C06                 | 入力E容の最終確認画面                           |
| F07     | 注斁E亁E                    | C07                 | 注斁E亁EチEージ表示                           |
| F08     | 会員登録                     | C08                 | 新規会員登録機EE会員惁E入力！E                |
| F09     | 会員惁E変更                 | C11                 | 会員惁Eの変更機E                               |
| F10     | ログイン                     | C09                 | 顧客ログイン機E                                 |
| F11     | ログアウチE                  | -                   | 顧客ログアウト機E                               |
| F12     | マイペEジ表示               | C10                 | 会員惁EめE録惁Eの表示                         |
| F13     | 注斁E歴表示                 | C12                 | 過去の注斁E歴を表示                             |
| F14     | 特定商取引法表示             | C13                 | 特啁Eに基づく表記E表示                         |
| F15     | プライバシーポリシー表示     | C14                 | プライバシーポリシーの表示                       |
| F16     | FAQ表示                      | C15                 | よくある質問E表示                               |
| F17     | 共通エラーペEジ表示         | C16                 | 404・サーバEエラー時E表示                      |
| F19     | 管琁EEグイン               | A01                 | 管琁EEEログイン機E                             |
| F20     | 啁E管琁E一覧EE            | A02                 | 啁E惁Eの一覧表示                               |
| F21     | 注斁E琁E一覧EE            | A05                 | 注斁E報の一覧表示                               |
| F22     | 管琁EEグアウチE            | -                   | 管琁EEEログアウト機E                           |
| F23     | 顧客管琁E                    | A08                 | 顧客惁Eの一覧・編雁EE                         |
| F24     | 自動E劁E                    | -                   | 会員惁Eの自動E劁E                              |
| F25     | 購入前ログイン               | C09                 | ログイン、新規登録、ゲストで購入を選抁E          |
| F26     | 注斁E定メール通知E銀行口座EE| -                 | 注斁E定時のメール送信EユーザーE管琁EEE      |
| F27     | 啁E登録                     | A02                 | 新規商品データ登録                               |
| F28     | 啁E編雁E                    | A02                 | 既存商品データの部刁E雁E                        |
| F29     | 注斁E細E詳細EE            | A06                 | 注斁E、購入老E報等E詳細惁E                   |

---

## 3.2 機E構E図

### 3.2.1【顧客向け機E、EF01 トップEージ表示
├─ F02 啁E一覧表示
━E  └─ F03 啁E詳細表示
━E      └─ F04 カート操佁E├─ F04 カート操佁E━E  ├─ F25 購入前ログインE非ログイン時！E━E  ━E  ├─ F10 ログイン ↁEF05 注斁E報入劁E━E  ━E  ├─ F08 会員登録 ↁEF05 注斁E報入劁E━E  ━E  └─ F05 注斁E報入劁E━E  ├─ F05 注斁E報入力（ログイン時！E━E  ━E  └─ F24 自動E劁E━E  ├─ F06 注斁E誁E━E  ━E  └─ F26 注斁E定メール通知
━E  └─ F07 注斁E亁E├─ F08 会員登録
├─ F10 ログイン
━E  ├─ F12 マイペEジ表示
━E  ━E  ├─ F09 会員惁E変更
━E  ━E  ━E  ├─ F08 会員登録EE登録EE━E  ━E  ━E  └─ F24 自動E力（変更時に反映EE━E  ━E  └─ F13 注斁E歴表示
━E  └─ F11 ログアウチE├─ F14 特定商取引法表示
├─ F15 プライバシーポリシー表示
├─ F16 FAQ表示
└─ F17 共通エラーペEジ表示

### 3.2.2【管琁EEけ機E、EF19 管琁EEグイン
├─ F20 啁E管琁E一覧EE━E  ├─ F27 啁E登録
━E  └─ F28 啁E編雁E├─ F21 注斁E琁E一覧EE━E  └─ F29 注斁E細E詳細EE├─ F23 顧客管琁E└─ F22 管琁EEグアウチE
※F10とF08はF25から遷移してぁE場合、F05に遷移する

---

### 3.3 主要機EフローE画面EE#### 3.3.1 購入フロー
```mermaid
sequenceDiagram
    participant ユーザー
    participant WebサイチE    participant メールサーチE    participant 管琁EE
    ユーザー ->> WebサイチE F01 トップEージ表示
    ユーザー ->> WebサイチE F02 啁E一覧表示
    ユーザー ->> WebサイチE F03 啁E詳細表示
    ユーザー ->> WebサイチE F04 カート操佁E
    alt 非ログインユーザー
        WebサイチE->> ユーザー: F25 購入前ログインを要汁E        alt ユーザーが「ログイン」選抁E            ユーザー ->> WebサイチE F10 ログイン
            WebサイチE->> WebサイチE F05 注斁E報入劁E        else ユーザーが「会員登録」選抁E            ユーザー ->> WebサイチE F08 会員登録
            WebサイチE->> WebサイチE F05 注斁E報入劁E        else ユーザーが「非会員として購入」選抁E            ユーザー ->> WebサイチE F05 注斁E報入劁E        end
    else ログイン済みユーザー
        ユーザー ->> WebサイチE F05 注斁E報入劁E    end

    alt ログイン済み or 会員登録済み
        WebサイチE->> WebサイチE F24 自動E力（会員惁EEE    end

    ユーザー ->> WebサイチE F06 注斁E誁E    WebサイチE->> メールサーチE F26 注斁E定メール通知EユーザーE管琁EEE    WebサイチE->> 管琁EE F07 注斁E亁E```
#### 3.3.2 会員登録・ログインフロー
```mermaid
sequenceDiagram
    participant ユーザー
    participant WebサイチE    participant 会員管琁EスチE

    ユーザー ->> WebサイチE F08 会員登録
    WebサイチE->> 会員管琁EスチE: ユーザー惁E登録

    ユーザー ->> WebサイチE F10 ログイン
    WebサイチE->> 会員管琁EスチE: 認証リクエスチE
    ユーザー ->> WebサイチE F12 マイペEジ表示
    ユーザー ->> WebサイチE F09 会員惁E変更
    WebサイチE->> WebサイチE F24 自動E力（現在会員惁EEE    WebサイチE->> 会員管琁EスチE: 惁E更新
    WebサイチE->> 会員管琁EスチE: F08 会員登録EE登録として扱ぁEE
    ユーザー ->> WebサイチE F13 注斁E歴表示
    ユーザー ->> WebサイチE F11 ログアウチE```

#### 3.3.3 管琁EEロー
```mermaid
sequenceDiagram
    participant 管琁EE    participant 管琁E面
    participant 管琁EスチE
    participant DB

    管琁EE->> 管琁E面: F19 管琁EEグイン
    管琁E面 ->> 管琁EスチE: 認証要汁E    管琁EスチE -->> DB: チEEタ照吁E    DB -->> 管琁EスチE: 照合確誁E    管琁EスチE -->> 管琁E面: 認証OK

    管琁EE->> 管琁E面: F20 啁E管琁E一覧表示EE    管琁EE->> 管琁E面: F27 啁E登録
    管琁E面 ->> DB: 啁EチEEタ新規登録
    管琁EE->> 管琁E面: F28 啁E編雁E    管琁E面 ->> DB: 啁EチEEタ更新

    管琁EE->> 管琁E面: F21 注斁E琁E一覧EE    管琁EE->> 管琁E面: F29 注斁E細
    管琁E面 ->> DB: 注斁E報取得E更新

    管琁EE->> 管琁E面: F23 顧客管琁E    管琁E面 ->> DB: 顧客惁E取得E操佁E
    管琁EE->> 管琁E面: F22 管琁EEグアウチE```

---
### 4.3. UI/UX基本方釁E
- **チEインの方向性**: 「丁寧な暮らし」を好む層に向けて、シンプルで余白のある画面、落ち着ぁE色味にする、E- **操作性**: 直感的に操作できるよう、画面構EめE作手頁EEシンプルにする、E- **一貫性**: ボタンの配置、ラベルの命名規則、エラーメチEージの表示形式などをシスチE全体で統一する、E- **視認性**: 斁EサイズめE使ぁE配Eし、情報が読みめEく、E要な惁Eが目立つようにする、E- **フィードバチE**: ユーザーの操作に対して、E琁EであることめEE琁E果EE功、エラーEを明確に表示する、E- **レスポンシチE*: スマEトフォン、PCブラウザのどちらで表示しても画面レイアウトが崩れなぁEぁEE慮を行う、E

 ### 4.2. 画面遷移図

以下に、主要な画面遷移を示す、E
- 顧客画面
<div class="mermaid">
graph TD
    A[C01: トップEージ]  --> B(C10: ログイン);
    A --> C(C02: 啁E一覧);
    A --> D(C14: 特定商取引法表示)
    A --> E(C15: プライバシーポリシー)
    A --> F(C16: FAQ)

   
    
    H --> G
    B -- 既存会員 --> G(C12:マイペEジ)
    B -- 新規会員 --> H(C08:会員登録)
  
    

    G --> I(C13:注斁E歴)
    G -- 登録惁Eの確認E変更 --> H

    C --> J(C03:啁E詳細)
    J --> K(C04:カーチE
    K -- 買ぁEを続けめE--> C
    K -- ログアウト状慁E--> P(C09:購入前ログイン)

   
    K -- ログイン状慁E--> L
    L --> M(C06:注斁E誁E
    M --> N[C07:注斁E亁E

    P -- 新規登録 -->H
    H -.->L
     P -- ログイン --> L(C05:注斁E報入劁E

    dummy[ ] --エラー発甁E--> O(C17:共通エラー画面)


    style dummy fill:#fff,stroke:#fff,stroke-width:1px
     style A fill:#e0f7fa,stroke:#0097a7
    style D fill:#e0f7fa,stroke:#0097a7
    style E fill:#e0f7fa,stroke:#0097a7
    style F fill:#e0f7fa,stroke:#

    style B fill:#e8f5e9,stroke:#2e7d32
    style G fill:#e8f5e9,stroke:#2e7d32
    style H fill:#e8f5e9,stroke:#2e7d32
    style I fill:#e8f5e9,stroke:#2e7d32

    style C fill:#fff3e0,stroke:#ef6c00
    style J fill:#fff3e0,stroke:#ef6c00

    style K fill:#ede7f6,stroke:#5e35b1
    style L fill:#ede7f6,stroke:#5e35b1
    style M fill:#ede7f6,stroke:#5e35b1
    style N fill:#ede7f6,stroke:#5e35b1
    style P fill:#ede7f6,stroke:#5e35b1
    style O fill:#d3d3d3,stroke:#808080

</div>
どの画面からでもトチEEペEジに戻れる、E
- 管琁EE面
<div class="mermaid">
graph TD
  A[A01:管琁EEグイン] -->B(A09:管琁EEニュー)
  B --> C(C02:啁E管琁E
  C --> D(A03:啁E登録)
  C --> E(A04:啁E編雁E
  B --> F(A05:注斁E琁E
  F --> G(A06:注斁E細)
  B --> H(A08:会員管琁E

 dummy[ ] --エラー発甁E--> O(C17:共通エラー画面)


    style dummy fill:#fff,stroke:#fff,stroke-width:1px
      style O fill:#d3d3d3,stroke:#808080
      style A fill:#cfd8dc,stroke:#455a64
  style B fill:#b0bec5,stroke:#37474f

  style C fill:#e0f2f1,stroke:#00796b
  style D fill:#e0f2f1,stroke:#00796b
  style E fill:#e0f2f1,stroke:#00796b

  style F fill:#f3e5f5,stroke:#8e24aa
  style G fill:#f3e5f5,stroke:#8e24aa
  style H fill:#e8f5e9,stroke:#2e7d32

</div>
## 5. チEEタ設訁E
本節では、シスチEにおける主なエンチEチE間E関係と、主要なチEEタの流れの概要を示す、E

### 5.1. 概念チEEタモチEEER図EE
<div class='mermaid'>
erDiagram
    CUSTOMER ||--o{ ORDER : has
    ORDER ||--o{ ORDER_DETAIL : contains
    PRODUCT ||--o{ ORDER_DETAIL : has
    PRODUCT ||--o{ CATEGORY : belongs_to
    ADMIN ||--o{ PRODUCT : manages
    ADMIN ||--o{ ORDER : manages
    ORDER ||--o{ PAYMENT_METHOD : uses
    ORDER ||--o{ ORDER_STATUS : has

    CUSTOMER {
        string customer_id PK "顧客ID"
        string email UK "メールアドレス"
        string password "パスワーチE(ハッシュ匁E"
        string last_name "姁E
        string first_name "吁E
        string phone_number "電話番号"
        string address "住所"
        datetime created_at "登録日晁E
        datetime updated_at "更新日晁E
    }

    PRODUCT {
        string product_id PK "啁EID"
        string product_name "啁E吁E
        string description "啁E説昁E
        decimal price "単価"
        string image_url "画像URL"
        string material "素杁E
        string size "サイズ"
        string category_id FK "カチEリID"
        int stock_quantity "在庫数"
        datetime created_at "登録日晁E
        datetime updated_at "更新日晁E
    }

    CATEGORY {
        string category_id PK "カチEリID"
        string category_name "カチEリ吁E
        datetime created_at "登録日晁E
        datetime updated_at "更新日晁E
    }

    ORDER {
        string order_id PK "注文ID"
        string customer_id FK "顧客IDE会員のみEE
        string order_email "注斁EEールアドレス"
        string order_name "注斁EE名"
        string order_phone_number "注斁EE話番号"
        string order_address "注斁EE所"
        decimal total_price "合計顁E
        decimal shipping_fee "配送料"
        string payment_method_code FK "支払い方法コーチE
        string order_status_code FK "注斁EチEEタスコーチE
        datetime payment_confirmed_at "入金確認日晁E
        datetime order_date "注斁E晁E
        datetime created_at "登録日晁E
        datetime updated_at "更新日晁E
    }

    ORDER_DETAIL {
        string order_detail_id PK "注斁EE細ID"
        string order_id FK "注文ID"
        string product_id FK "啁EID"
        int quantity "数釁E
        decimal unit_price "購入時単価"
        datetime created_at "登録日晁E
        datetime updated_at "更新日晁E
    }

    ADMIN {
        string admin_id PK "管琁EED"
        string email UK "メールアドレス"
        string password "パスワーチE(ハッシュ匁E"
        string user_name "ユーザー吁E
        datetime created_at "登録日晁E
        datetime updated_at "更新日晁E
    }

    PAYMENT_METHOD {
        string payment_method_code PK "支払い方法コーチE
        string label "表示吁E
        int sort_order "表示頁E
        bool is_active "有効フラグ"
        datetime created_at "登録日晁E
        datetime updated_at "更新日晁E
    }

    ORDER_STATUS {
        string order_status_code PK "注斁EチEEタスコーチE
        string label "表示吁E
        string description "スチEEタス説昁E
        int sort_order "表示頁E
        bool is_active "有効フラグ"
        datetime created_at "登録日晁E
        datetime updated_at "更新日晁E
    }

</div>

- **エンチEチE**: CUSTOMER(顧客), PRODUCT(啁E), CATEGORY(カチEリ), ORDER(注斁E, ORDER_DETAIL(注斁EE細), ADMIN(管琁EE,PAYMENT_METHOD (支払い方法Eスタ),ORDER_STATUS (注斁EチEEタスマスタ) 

- **リレーション**:
  - 顧客は注斁E行う (1対多、CUSTOMER -> ORDER)
  - 注斁EE注斁EE細を含む (1対多、ORDER -> ORDER_DETAIL)
  - 啁Eは注斁EE細に含まれる (1対多、PRODUCT -> ORDER_DETAIL)
  - 啁EはカチEリに属すめE(1対多、PRODUCT -> CATEGORY)
  - 管琁EEE啁Eを管琁EめE(1対多、ADMIN -> PRODUCT)
  - 管琁EEE注斁E管琁EめE(1対多、ADMIN -> ORDER)
  - 注斁EE支払い方法を利用する (1対多、ORDER -> PAYMENT_METHOD)
  - 注斁EE注斁EチEEタスを持つ (1対多、ORDER -> ORDER_STATUS)

## 5.2. 主要テーブル概要E
  - **CUSTOMER (顧客惁EチEEブル)**
    - 会員登録を行った顧客の基本惁Eを保持する、E
    - `customer_id`を主キーとし、`email`はユニEク制紁E持つ、E
    - パスワードEハッシュ化して保存する、E
    - ログイン認証、注斁E歴の紐付け、EE送E惁Eの自動E力、管琁EEよる顧客惁E参Eに利用される、E
  - **PRODUCT (啁E惁EチEEブル)**
    - オンライン販売する吁E品E詳細惁Eを管琁Eる、E
    - `product_id`を主キーとする、E
    - `啁E名`、`価格`、`画像URL`、素材、サイズなどの詳細惁Eを保持する、E
    - `category_id`でカチEリ惁Eに紐づく、E
    - 啁E一覧表示、商品詳細表示、カートへの追加、注斁EE細での参E、管琁EEよる啁E登録・編雁E利用される、E
  - **CATEGORY (カチEリ惁EチEEブル)**   
    - 啁EをE類するためEカチEリ惁Eを管琁EるEスタチEEブル、E
    - `category_id`を主キーとする、E
    - 啁E一覧のカチEリ絞り込み、商品登録時EカチEリ選択に利用される、E
  - **ORDER (注斁E報チEEブル)**
    - 顧客からの注斁EE体に関する惁Eを管琁Eる。会員・非会員問わず、Eての注斁E記録されめE
    - `order_id`を主キーとする、E
    - 会員の場合E`customer_id`でCUSTOMERチEEブルに紐づくが、E会員の場合ENULLとなり、order_email、order_nameなどに直接惁Eが格納される、E
    - total_price、shipping_feeEアプリケーションロジチEで計算）、payment_method_codeE支払い方法Eスタ参EE、order_status_codeE注斁EチEEタスマスタ参EEなどの惁Eを保持する、E
    - payment_confirmed_at は、E行振込めE引きにおけるE金確認日時を記録する、E
    - 注斁E歴の表示、管琁EEよる注斁E琁E注斁E認メールのトリガーに利用される、E

  - **ORDER_DETAIL (注斁EE細惁EチEEブル)**
    - 吁E斁E含まれる個、EE啁Eの詳細Eどの啁Eをいくつ購入したか、その時点の単価Eを管琁Eる、E
    - order_detail_idを主キーとし、order_idでORDERチEEブルに、product_idでPRODUCTチEEブルにそれぞれ紐づく、E
    - 注斁EE容の詳細表示、注斁E計額E算Eに利用される、E
  - **ADMIN (管琁EE報チEEブル)**
    - ECサイトE運営・管琁E行う拁E老EE惁Eを管琁Eる、E
    - admin_idを主キーとし、emailはユニEク制紁E持つ、E
    - パスワードEハッシュ化して保存する、E
    - 管琁EEグイン認証、管琁E面へのアクセス制御に利用される、E
  - **PAYMENT_METHOD** (支払い方法EスタチEEブル) 
    - ECサイトで利用できる支払い方法E種類を定義・管琁Eる、E
    - payment_method_codeを主キーとする、E
    - 表示名！EabelE、表示頁EEort_orderE、有効無効フラグEEs_activeEを保持する、E
    - ORDERチEEブルのpayment_method_codeがこのチEEブルを参照する、E
  - ORDER_STATUS (注斁EチEEタスマスタチEEブル) 
    - 注斁E現在どの段階にあるかを示すスチEEタスの種類を定義・管琁Eる、E
    - order_status_codeを主キーとする、E
    - 表示名！EabelE、詳細説明！EescriptionE、表示頁EEort_orderE、有効無効フラグEEs_activeEを保持する、E
    - ORDERチEEブルのorder_status_codeがこのチEEブルを参照する、E
### 5.3. チEEタフロー概要E
本節では、主要な機Eにおけるデータの流れを詳細に記述します、E
**啁E一覧表示**

1. **画面(C02)**:
    - 顧客がカチEリ選択や検索ワードE絞り込み条件を指定して啁E一覧を表示、E
2. **アプリケーション(Backend)**:
    - カチEリID、検索ワード、絞り込み条件を受け取る、E
    - `PRODUCT`チEEブルから該当商品E一覧を取得、E
    - `CATEGORY`チEEブルからカチEリ名を取得し、商品に紐づける、E
3. **チEEタベEス(DB)**: 
    - `PRODUCT`チEEブル、`CATEGORY`チEEブルを参照、E
4. **アプリケーション(Backend)**:
    - 取得した商品リストを画面に返す、E
5. **画面(C02)**: 啁E一覧を表示、E


**啁E詳細表示**

1. **画面(C02)**: 顧客が商品一覧から啁Eを選択、E
2. **アプリケーション(Backend)**:
    - `product_id`を受け取り、該当商品E詳細惁Eを取得、E
3. **チEEタベEス(DB)**: `PRODUCT`チEEブルを参照、E
4. **アプリケーション(Backend)**: 啁E詳細を返却、E
5. **画面(C03)**: 啁E詳細画面を表示、E


**カート管琁EセチEョン使用EE*

1. **画面(C03)**: 顧客が商品をカートに追加・削除・数量変更、E
2. **アプリケーション(Backend)**:
    - `product_id`、数量、操作タイプ（追加/削除/数量変更Eを受け取り、E
    - セチEョンEユーザー別の一時記EEに格納されたカートデータを更新、E
3. **チEEタベEス(DB)**: DBは使用せず、サーバE側セチEョンストレージを使用、E
4. **アプリケーション(Backend)**: 更新後Eカート情報をセチEョンから取得して返却、E
5. **画面(C04)**: カートE容を表示、E


**購入フローE注斁E報入力～完亁EE*

1. **画面(C04)**: カート画面から「購入手続き」を選択、E
2. **アプリケーション(Backend)**:
    - ログイン状態をチェチE、E
    - 非ログイン時Eログイン(C10)、会員登録(C08)、E会員購入(C05)のぁEれかへ遷移、E
3. **画面(C05)**: ユーザーが注斁E報をE力、E
    - 入力頁EE変数EE
        - 氏名 (`name`)
        - メールアドレス (`email`)
        - 電話番号 (`phone`)
        - 配送E住所 (`address`)
        - 支払い方況E(`payment_method_id`)
        - 備老EE(`notes`)
4. **アプリケーション(Backend)**:
    - 会員の場合、`CUSTOMER`チEEブルから上記情報をE動E力、E
    - 送料・合計額を計算し、セチEョンに保存、E
5. **画面(C06)**: ユーザーが最終確認、E
6. **アプリケーション(Backend)**:
    - 注斁EE容をもとにトランザクション開始、E
    - `ORDER`, `ORDER_DETAIL`に保存、E
    - メール通知Eユーザーと管琁EEを送信、E
7. **チEEタベEス(DB)**:
    - `ORDER`, `ORDER_DETAIL`チEEブルにINSERT、E
8. **画面(C07)**: 注斁E亁E面を表示、E


**会員登録・認証**

1. **画面(C08)**: 会員登録フォームを表示、E客惁E入力、E
2. **アプリケーション(Backend)**:
    - 入力情報を`CUSTOMER`チEEブルに保存（パスワードEハッシュ化）、E
    - 認証メール送信E忁Eに応じてE、E
3. **チEEタベEス(DB)**: `CUSTOMER`チEEブルにINSERT、E
4. **画面(C09)**: 認証完亁Eor 案Eを表示、E


**ログイン処琁E*

1. **画面(C10)**: 顧客がログイン惁EをE力、E
2. **アプリケーション(Backend)**:
    - `CUSTOMER`チEEブル照合し、セチEョンEトークンを生成、E
3. **チEEタベEス(DB)**: `CUSTOMER`を参照、E
4. **アプリケーション(Backend)**: 認証成功E失敗を返す、E
5. **画面(C01 またE C12)**: トップEージまたEマイペEジへ遷移、E


**マイペEジと注斁E歴**

1. **画面(C12)**: マイペEジ表示、E
2. **画面(C09)**: 会員惁E変更、E
3. **アプリケーション(Backend)**:
    - 現在の会員惁Eを取得して自動E力、E
    - 更新惁Eを`CUSTOMER`チEEブルに保存、E
4. **画面(C13)**: 注斁E歴表示、E
5. **アプリケーション(Backend)**:
    - `ORDER`, `ORDER_DETAIL`, `PRODUCT`を参照し履歴惁Eを返却、E
6. **チEEタベEス(DB)**: 上記テーブルをSELECT、E


**ログアウチE*

1. **画面(C11)**: ログアウト操作、E
2. **アプリケーション(Backend)**:
    - セチEョン破棁EE
3. **画面(C01)**: トップEージに遷移、E


**管琁EEグイン**

1. **画面(A01)**: 管琁EEログイン惁EをE力、E
2. **アプリケーション(Backend)**:
    - `ADMIN`チEEブルを認証、E
3. **チEEタベEス(DB)**: `ADMIN`チEEブルを参照、E
4. **画面(A02)**: 管琁EチEE表示、E


**啁E管琁E*

1. **画面(A02)**: 啁E管琁E覧表示、E
2. **アプリケーション(Backend)**:
    - `PRODUCT`をE件取得、E
3. **チEEタベEス(DB)**: `PRODUCT`チEEブルをSELECT、E
4. **画面(A02)**: 啁EチEEタ一覧を表示、E
5. **画面(A03)**: 新規商品登録、E
6. **アプリケーション(Backend)**:
    - 入力データを検証し、`PRODUCT`チEEブルにINSERT、E
7. **チEEタベEス(DB)**: `PRODUCT`にINSERT、E
8. **画面(A04)**: 啁E編雁EE
9. **アプリケーション(Backend)**:
    - 入力データを検証し、`PRODUCT`チEEブルをUPDATE、E
10. **チEEタベEス(DB)**: `PRODUCT`にUPDATE、E


**注斁E琁E*

1. **画面(A05)**: 注斁E琁E覧表示、E
2. **アプリケーション(Backend)**:
    - `ORDER`, `ORDER_DETAIL`, `CUSTOMER`, `PAYMENT_METHOD`, `ORDER_STATUS`などを参照、E
3. **チEEタベEス(DB)**: 上記テーブルをSELECT、E
4. **画面(A05)**: 一覧チEEタを表示、E
5. **画面(A06)**: 注斁E細確認、E
6. **アプリケーション(Backend)**:
    - 注斁E報の取得、E
    - スチEEタス変更時、在庫の戻しや入金確認などの処琁EE
7. **チEEタベEス(DB)**: `ORDER`などをUPDATE、E
8. **画面(A06)**: 注斁E細惁Eを表示、E


**顧客管琁E*

1. **画面(A08)**: 顧客一覧E詳細表示、E
2. **アプリケーション(Backend)**:
    - `CUSTOMER`, `ORDER`を取得、E
3. **チEEタベEス(DB)**: 顧客・注斁EータをSELECT、E
4. **画面(A08)**: 顧客惁Eと注斁E歴を表示、E


**管琁EEグアウチE*

1. **画面(A07)**: ログアウト操作、E
2. **アプリケーション(Backend)**:
    - セチEョン破棁EE
3. **画面(A01)**: 管琁EEグイン画面に遷移、E


# 6. 非機E要件への対応方釁E
## 6.1 性能・拡張性

### 表示速度
- 啁E一覧、商品詳細、カート、注斁E定E琁EつぁE、E常時E3秒以冁EE応答を実現するようAPI設計EDB設計を行う、E- 画像ECDN利用等により配信を最適化し、モバイル回線でもストレスのなぁE度を確保、E
### 封E拡張性
- 決済機E追加Eクレカ・コンビニE、レビュー機E、在庫管琁EEなど封Eの追加を想定、E- MVCめEービス持Eの構Eで機Eを疎結合にする、E- チEEタスキーマやAPI仕様E追加に耐えぁE汎用設計を行う、E
### 稼働率
- SLAとして月間稼働率99.5%以上を目標、E- クラウドEマネージドサービス活用、E害監視設定でこれを達成、E
### バックアチEE・リカバリ
- DBとファイルE商品画像等）E1日1回E動バチEアチEE、E- RTO:2時間以冁E/ RPO:24時間以冁Eを目標に手頁E策定、E
### 冗長匁E- 初期はシングル構EEバチEアチEEで開始、E- 封EトラフィチE増加時にロードバランサ・オートスケーリング導Eを想定、E
## 6.2 セキュリチE

### 通信の暗号匁E- 全ペEジHTTPSを強制適用EESTSも利用想定）、E
### 認証・アクセス制御
- 会員・管琁EEもにID/パスワード方式、E- 管琁E面は強固なパスワードEリシーとログイン試行制限を適用、E
### 脁E性対筁E- SQLインジェクション・XSS対策をORM/チEプレートで確実に、E- OSSライブラリは脁E性惁Eを継続ウォチEし、定期皁EアチEEチEEト、E
### 監査ログ
- 管琁E面のログイン履歴、商品E注斁Eータ更新の操作履歴をDBまたEログ基盤に蓁E、E- 障害・不正調査に備える、E
### 個人惁E保護
- 個人惁E保護方針を反映し、DBでは忁E最低限の個人惁Eのみ保持する、E
## 6.3 操作性・ユーザビリチE

### UI/UX
- モバイルファースト設計（レスポンシブ）、E- 直感的な導線で「商品E抁EↁEカーチEↁE購入確定」まで最小手頁E完結、E- エラー時EメチEージもユーザー視点で刁Eりやすく表記、E
### チEイン
- 白基調・シンプルで啁E写真が際立つチEイン、E- ブランドイメージに合うフォントEカラーを基本設計で定義、E
### サポEチE- FAQ・操作ガイドEージをサイトEに設置、E
## 6.4 運用性・保守性

### 管琁E面
- 啁E登録・編雁E注斁E況管琁Eブラウザ上で完結、E- 管琁E面にID/パスワード忁E。操作ログを取得、E- 管琁Eスクの90%以上をこE画面で完結できるよう設計、E
### 可読性・保守性
- フレームワークは保守人材確保が容易なもEを採用E侁E Laravel、Django、Node.js系E、E- コードレビュー・バEジョン管琁EGitで徹底、E
### セキュリチE更新
- 使用するOSSライブラリは定期皁E脁E性スキャンを行いアチEEチEEト、E
# 7. 運用・保守設計への対忁E
## 7.1 運用体制・ルール
- 管琁EEDを最小限に限定し、E用負拁EEリスクを低減、E- 注斁EE琁E銀行振込・代引きの確認や発送EE手動だが、管琁E面で一允Eに確認可能、E- 管琁EEは注斁Eに自動通知メールが届くため、迁Eに手動処琁E移行可能、E
## 7.2 監視E障害対忁E- サーバ監視（リソース・稼働監視）とアプリケーションログ監視を導E、E- 障害時E即時アラーチEↁE運用拁E老E対応、E- チEEタ障害時E前述のバックアチEEからのリストア手頁E対応、E
## 7.3 保守計画
- 定期皁E例えば四半期ごとEに脁E性診断チEEルを用ぁEアプリケーションをチェチE、E- 小規模改修めEンチEチE加は運用チEム主体で可能なようCMS機EEまたECSVインポEト）も検討、E
## 7.4 法令・ポリシー遵宁E- 特定商取引法、個人惁E保護法、Eライバシーポリシーを運用開始前にサイトEで適刁E掲示、E- 消費税法に基づき、税込・税抜の金額を表示、E
