# . システム概要

## 1.1 システム構成の全体像

### 提供するシステム
株式会社〇〇が展開する雑貨ブランド向けのオンライン販売サイト（ECサイト）。  
商品の閲覧、検索、購入、注文管理をオンラインで完結できる仕組みを構築する。

### 主なユーザー区分と利用形態

このシステムでは、大きく以下の2種類のユーザーを想定している。

- **一般顧客（エンドユーザー）**  
  商品の閲覧、購入、およびマイページ上での注文履歴確認（任意会員登録による）を行う。  
  主にスマートフォン、PC、タブレットといったデバイスからアクセスすることを想定する。

- **管理者（サイト運営者）**  
  商品情報の登録・編集や、注文状況の管理などを行う。  
  主にPCブラウザからアクセスし、ブラウザ上の管理画面を通じて操作を実施する。

### 利用チャネル
- インターネット経由で公開（HTTPS対応）
- モバイルファーストのレスポンシブデザイン

### インフラ構成（想定）
- クラウド環境（AWS, GCP 等）
- Webアプリケーションサーバ、DBサーバ
- SSL/TLS による暗号化通信

##　システム概要図


<div class="mermaid">
graph TD
    subgraph ユーザー環境
        Client[一般顧客<br>（スマホ・PC・タブレット）]
        Admin[管理者<br>（PCブラウザ）]
    end

    subgraph インターネット
        Firewall[ファイアウォール]
        LoadBalancer[ロードバランサー]
        CDN[CDN（画像配信）]
    end

    subgraph クラウド環境
        subgraph Webサーバー
            WebServer1[Webサーバー1]
            WebServer2[Webサーバー2]
        end

        subgraph アプリケーションサーバー
            AppServer1[Appサーバー1]
            AppServer2[Appサーバー2]
        end

        subgraph DBサーバー
            DB[DBサーバー<br>]
            end

        Storage[S3互換ストレージ]
        ExternalAPI[外部APIサービス]
    end

    %% ユーザーからインターネット
    Client --> Firewall
    Admin --> Firewall

    %% インターネット内部の流れ
    Firewall --> LoadBalancer
    LoadBalancer --> WebServer1
    LoadBalancer --> WebServer2
    WebServer1 --> CDN
    WebServer2 --> CDN

    %% Webサーバーからアプリサーバー
    WebServer1 --> AppServer1
    WebServer2 --> AppServer2

    %% アプリサーバーからDBサーバー
    AppServer1 --> DB
    AppServer2 --> DB

    %% アプリサーバーから外部ストレージ・API
    AppServer1 --> Storage
    AppServer2 --> ExternalAPI

  
    
    style Client fill:#f9f,stroke:#333,stroke-width:1.5px
    style Admin fill:#f9f,stroke:#333,stroke-width:1.5px
    style Firewall fill:#ffcc99,stroke:#333,stroke-width:1.5px
    style LoadBalancer fill:#ffcc99,stroke:#333,stroke-width:1.5px
    style CDN fill:#ccffcc,stroke:#333,stroke-width:1.5px
    style WebServer1 fill:#99ccff,stroke:#333,stroke-width:1.5px
    style WebServer2 fill:#99ccff,stroke:#333,stroke-width:1.5px
    style AppServer1 fill:#6699cc,stroke:#333,stroke-width:1.5px
    style AppServer2 fill:#6699cc,stroke:#333,stroke-width:1.5px
    style DB fill:#99ff99,stroke:#333,stroke-width:1.5px
    style Storage fill:#cccccc,stroke:#333,stroke-width:1.5px
    style ExternalAPI fill:#ff9999,stroke:#333,stroke-width:1.5px
</div>


---

##  各項目の説明

### ユーザー環境
- **一般顧客（スマホ・PC・タブレット）**
  - Webブラウザを通じてサービスを利用するエンドユーザー。
- **管理者（PCブラウザ）**
  - 管理画面にログインし、ユーザー管理や商品管理を行う。

---

### インターネット
- **ファイアウォール**
  - 外部からの不正アクセスを遮断する。
- **ロードバランサー**
  - 複数のWebサーバーへの負荷分散を行い、可用性を確保。
- **CDN（画像配信）**
  - 静的コンテンツ（画像・CSS・JS）を高速配信するためのネットワーク。

---

### クラウド環境
#### Webサーバー
- **Webサーバー1, Webサーバー2**
  - ユーザーからのHTTP(S)リクエストを受け付け、HTML等を返却。
  - 負荷分散によりスケールアウト可能。

#### アプリケーションサーバー
- **Appサーバー1, Appサーバー2**
  - ビジネスロジックを実行し、データベースとの橋渡しを行う。

#### DBサーバー
- **DBサーバー**
 -データを整合性を取って管理する。


#### その他サービス
- **S3互換ストレージ**
  - 画像やファイルなどを保存する。
- **外部APIサービス**
  - 他サービスとの連携を行う。

---
# 2. 非機能要件への対応方針

## 2.1 性能・拡張性

### 表示速度
- 商品一覧、商品詳細、カート、注文確定処理について、通常時は3秒以内の応答を実現するようAPI設計・DB設計を行う。
- 画像はCDN利用等により配信を最適化し、モバイル回線でもストレスのない速度を確保。

### 将来拡張性
- 決済機能追加（クレカ・コンビニ）、レビュー機能、在庫管理機能など将来の追加を想定。
- MVCやサービス指向の構成で機能を疎結合にする。
- データスキーマやAPI仕様は追加に耐えうる汎用設計を行う。

### 稼働率
- SLAとして月間稼働率99.5%以上を目標。
- クラウドのマネージドサービス活用、障害監視設定でこれを達成。

### バックアップ・リカバリ
- DBとファイル（商品画像等）の1日1回自動バックアップ。
- RTO:2時間以内 / RPO:24時間以内 を目標に手順を策定。

### 冗長化
- 初期はシングル構成＋バックアップで開始。
- 将来トラフィック増加時にロードバランサ・オートスケーリング導入を想定。

## 2.2 セキュリティ

### 通信の暗号化
- 全ページHTTPSを強制適用（HSTSも利用想定）。

### 認証・アクセス制御
- 会員・管理者ともにID/パスワード方式。
- 管理画面は強固なパスワードポリシーとログイン試行制限を適用。

### 脆弱性対策
- SQLインジェクション・XSS対策をORM/テンプレートで確実に。
- OSSライブラリは脆弱性情報を継続ウォッチし、定期的にアップデート。

### 監査ログ
- 管理画面のログイン履歴、商品・注文データ更新の操作履歴をDBまたはログ基盤に蓄積。
- 障害・不正調査に備える。

### 個人情報保護
- 個人情報保護方針を反映し、DBでは必要最低限の個人情報のみ保持する。

## 2.3 操作性・ユーザビリティ

### UI/UX
- モバイルファースト設計（レスポンシブ）。
- 直感的な導線で「商品選択 → カート → 購入確定」まで最小手順で完結。
- エラー時のメッセージもユーザー視点で分かりやすく表記。

### デザイン
- 白基調・シンプルで商品写真が際立つデザイン。
- ブランドイメージに合うフォント・カラーを基本設計で定義。

### サポート
- FAQ・操作ガイドページをサイト内に設置。

## 2.4 運用性・保守性

### 管理画面
- 商品登録・編集、注文状況管理をブラウザ上で完結。
- 管理画面にID/パスワード必須。操作ログを取得。
- 管理タスクの90%以上をこの画面で完結できるよう設計。

### 可読性・保守性
- フレームワークは保守人材確保が容易なものを採用（例: Laravel、Django、Node.js系）。
- コードレビュー・バージョン管理をGitで徹底。

### セキュリティ更新
- 使用するOSSライブラリは定期的に脆弱性スキャンを行いアップデート。

# 3. 運用・保守設計への対応

## 3.1 運用体制・ルール
- 管理者IDを最小限に限定し、運用負担・リスクを低減。
- 注文処理（銀行振込・代引きの確認や発送）は手動だが、管理画面で一元的に確認可能。
- 管理者には注文時に自動通知メールが届くため、迅速に手動処理へ移行可能。

## 3.2 監視・障害対応
- サーバ監視（リソース・稼働監視）とアプリケーションログ監視を導入。
- 障害時は即時アラート → 運用担当者が対応。
- データ障害時は前述のバックアップからのリストア手順で対応。

## 3.3 保守計画
- 定期的（例えば四半期ごと）に脆弱性診断ツールを用いてアプリケーションをチェック。
- 小規模改修やコンテンツ追加は運用チーム主体で可能なようCMS機能（またはCSVインポート）も検討。

## 3.4 法令・ポリシー遵守
- 特定商取引法、個人情報保護法、プライバシーポリシーを運用開始前にサイト内で適切に掲示。
- 消費税法に基づき、税込・税抜の金額を表示。
